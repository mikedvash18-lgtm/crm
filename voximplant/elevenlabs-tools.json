{
  "_description": "ElevenLabs client tool definitions. Copy these into the ElevenLabs dashboard for each agent (EN/IT/ES).",

  "tools": [
    {
      "type": "client",
      "name": "transfer_connected",
      "description": "Call this tool immediately when you hear a real person respond (hello, yes, pronto, etc.). This confirms a human is on the line, NOT a voicemail.",
      "parameters": {
        "type": "object",
        "properties": {
          "reason": {
            "type": "string",
            "description": "Brief description of what the person said that confirmed they are human"
          }
        },
        "required": ["reason"]
      }
    },
    {
      "type": "client",
      "name": "voicemail_detected",
      "description": "Call this tool immediately when you hear a voicemail greeting, an automated message, a beep, or any indication that no live person is on the line.",
      "parameters": {
        "type": "object",
        "properties": {
          "reason": {
            "type": "string",
            "description": "Brief description of what you heard (e.g. 'voicemail greeting', 'beep tone', 'automated message')"
          }
        },
        "required": ["reason"]
      }
    },
    {
      "type": "client",
      "name": "transfer_to_agent",
      "description": "Call this tool when the lead shows strong interest and wants to proceed, or explicitly asks to speak to a real person / live agent.",
      "parameters": {
        "type": "object",
        "properties": {
          "reason": {
            "type": "string",
            "description": "Why the transfer is happening (e.g. 'Lead wants to proceed with activation', 'Lead requested live agent')"
          }
        },
        "required": ["reason"]
      }
    },
    {
      "type": "client",
      "name": "end_call",
      "description": "Call this tool when the conversation is over. You MUST provide a disposition that classifies the outcome.",
      "parameters": {
        "type": "object",
        "properties": {
          "disposition": {
            "type": "string",
            "enum": [
              "not_interested",
              "curious",
              "do_not_call",
              "wrong_number",
              "callback_requested",
              "no_engagement"
            ],
            "description": "not_interested = Lead explicitly declined. curious = Lead showed some interest but not ready. do_not_call = Lead asked to never be called again. wrong_number = Number doesn't belong to the lead. callback_requested = Lead asked to be called back later. no_engagement = Silence, no meaningful conversation."
          },
          "reason": {
            "type": "string",
            "description": "Brief summary of why the call ended with this disposition"
          }
        },
        "required": ["disposition", "reason"]
      }
    }
  ],

  "system_prompt_additions": "The person you're calling is {{name}}.\nThis is for the campaign: {{campaign}}.\n\nIMPORTANT DETECTION RULES:\n- When the call connects and you hear a person respond (hello, yes, etc.), immediately call the transfer_connected tool.\n- If you hear a voicemail greeting, an automated message, or a beep, immediately call the voicemail_detected tool.\n- If the person says they're not interested, try to handle the objection ONCE. If they insist, call end_call with disposition \"not_interested\".\n- If the person asks to never be called again, call end_call with disposition \"do_not_call\".\n- If the person says it's a wrong number, call end_call with disposition \"wrong_number\".\n- If the person asks you to call back later, call end_call with disposition \"callback_requested\".\n- If there's no response after your greeting (silence for 5+ seconds), call end_call with disposition \"no_engagement\".\n- When the lead shows interest and wants to proceed, call transfer_to_agent.",

  "dynamic_variables": {
    "name": "Lead's first name (passed from backend via customData)",
    "campaign": "Campaign name (passed from backend via customData)",
    "funnel": "Lead source/funnel (passed from backend via customData)"
  }
}
